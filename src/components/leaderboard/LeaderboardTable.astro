---
// src/leaderboard/components/LeaderboardTable.astro
---

<section class='max-w-2xl px-4 mx-auto mt-12 text-white'>
	<h2 class='mb-4 text-2xl font-bold text-center'>Full Leaderboard</h2>
	<div class='overflow-x-auto'>
		<table class='w-full bg-gray-900 border-collapse rounded-md shadow-lg'>
			<thead class='bg-gray-700'>
				<tr>
					<th class='p-3 text-sm font-semibold tracking-wider text-left'>#</th>
					<th class='p-3 text-sm font-semibold tracking-wider text-left'>Team</th>
					<th class='p-3 text-sm font-semibold tracking-wider text-right'>Score</th>
				</tr>
			</thead>
			<tbody id='leaderboard-body' class='text-sm divide-y divide-gray-700'></tbody>
		</table>
	</div>

	<script type='module'>
		const body = document.getElementById('leaderboard-body')

		const res = await fetch(
			'https://raw.githubusercontent.com/melchiorhering/melchiorhering.github.io/main/teams.json'
		)
		const teams = await res.json()
		const sorted = [...teams].sort((a, b) => b.score - a.score)

		const rows = sorted
			.map(
				(team, index) => `
			<tr class="hover:bg-gray-800">
				<td class="p-3">${index + 1}</td>
				<td class="p-3 font-medium">${team.team}</td>
				<td class="p-3 font-semibold text-right">${team.score}</td>
			</tr>
		`
			)
			.join('')

		body.innerHTML = rows
	</script>
</section>

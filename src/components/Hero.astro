---
import profilePictureTransparent from '@/assets/cartoon-profile-cutout.webp'
import travelPicture from '@/assets/travel-jordan.jpg'
import TypeWriteComponent from '@/components/react/TypeWriteComponent'
import Polaroid from '@/components/Polaroid.astro'
import { heroData } from '@/data/data'
import { Icon } from 'astro-icon/components'
import Container from '@/components/Container.astro'
---

{/* Hero Split into Two Sections */}
<div class='flex flex-col'>
	{/* Text Section - Full height on mobile */}
	<Container class='flex items-center justify-center lg:min-h-fit'>
		<div class='my-36 flex w-full items-center justify-center md:pt-0 lg:w-1/2 lg:justify-start'>
			<div class='flex w-full max-w-lg flex-col gap-2 px-4 lg:gap-4 lg:px-0 lg:text-left'>
				<h1 class={heroData.heading.class}>
					<TypeWriteComponent client:only='react' texts={heroData.texts} />
				</h1>

				<p class={heroData.description.class}>
					{heroData.description.text}
				</p>

				<div class='flex flex-col gap-x-2 sm:flex-row sm:justify-center lg:justify-start'>
					{
						heroData.buttons.map((button) => (
							<a href={button.href} class={button.class}>
								{button.iconName && <Icon name={button.iconName} class='h-5 w-5' />}
								{button.text}
							</a>
						))
					}
				</div>
			</div>
		</div>

		{/* Desktop-only image section */}
		<div class='relative hidden h-[600px] w-[600px] lg:block'>
			<Polaroid
				position='right'
				image={travelPicture}
				alt='Travel; Camel in Jordan'
				width={220}
				iconName='airplane'
				class='absolute -right-14 top-0 -rotate-6'
			/>

			<Polaroid
				position='center'
				image='https://cdn.pixabay.com/photo/2021/11/10/07/17/canal-6783153_1280.jpg'
				alt='Amsterdam Westerkerk'
				width={280}
				height={280}
				iconName='house'
				class='absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2'
			/>

			<Polaroid
				position='left'
				image={profilePictureTransparent}
				alt='Disney Like Profile'
				width={240}
				iconName='person'
				imageClass='bg-[url(/images/binary-background.webp)]'
				class='absolute -left-8 bottom-0 rotate-6'
			/>

			{/* Decorative elements */}
			<div
				class='absolute -right-20 top-0 h-20 w-20 animate-pulse rounded-full border-4 border-dashed border-sky-200/80 dark:border-sky-800/80'
			>
			</div>
			<div
				class='absolute -left-16 bottom-12 h-14 w-14 animate-pulse rounded-lg border-4 border-sky-200/80 dark:border-sky-800/80'
			>
			</div>
			<div
				class='absolute bottom-0 right-20 h-16 w-16 animate-pulse rounded-full border-4 border-sky-200/80 dark:border-sky-800/80'
			>
			</div>
		</div>
	</Container>

	{/* Mobile-only Polaroid Section */}
	<div class='lg:hidden'>
		<Container>
			<div class='flex flex-col items-center gap-16 py-16'>
				<div class='w-[280px]'>
					<Polaroid
						position='center'
						image='https://cdn.pixabay.com/photo/2021/11/10/07/17/canal-6783153_1280.jpg'
						alt='Amsterdam Westerkerk'
						width={280}
						height={280}
						iconName='house'
					/>
				</div>
				<div class='w-[280px]'>
					<Polaroid
						position='right'
						image={travelPicture}
						alt='Travel; Camel in Jordan'
						width={280}
						iconName='airplane'
					/>
				</div>
				<div class='w-[280px]'>
					<Polaroid
						position='left'
						image={profilePictureTransparent}
						alt='Disney Like Profile'
						width={280}
						iconName='person'
						imageClass='bg-[url(/images/binary-background.webp)]'
					/>
				</div>
			</div>
		</Container>
	</div>
</div>

<script>
	const gallery = document.getElementById('image-gallery')
	const polaroids = gallery?.querySelectorAll('.polaroid')

	polaroids?.forEach((polaroid) => {
		if (polaroid instanceof HTMLElement) {
			// Type guard for HTMLElement
			polaroid.addEventListener('mouseenter', () => {
				// Reset all polaroids to initial z-index
				polaroids.forEach((p) => {
					if (p instanceof HTMLElement) {
						// Type guard for each element
						p.style.zIndex = '10'
					}
				})
				// Set hovered polaroid to highest z-index
				polaroid.style.zIndex = '30'
			})
		}
	})
</script>
